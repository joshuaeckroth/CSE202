<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Lab 7</title>
    <meta name="generator" content="muse.el">
    <meta http-equiv="Content-Type"
          content="text/html; charset=iso-8859-1">
    <style type="text/css">
body {
  background: white; color: black;
  margin-left: 3%; margin-right: 7%;
  line-height: 1.5;
  font-family: Nimbus Sans L, sans;
}

p { margin-top: 1% }
p.verse { margin-left: 3% }

.example { margin-left: 3% }

li { margin: 0.5em 0; }

h2 {
  margin-top: 25px;
  margin-bottom: 0px;
}
h3 { margin-bottom: 0px; }

pre {
  border: 1px solid #ccc;
  margin: 5px;
  padding: 5px;
}

td {
  border-top: 1px solid #ccc;
  border-bottom: 1px solid #ccc;
}

code { color: #bc8f8f; font-weight: bold; }
    </style>
  </head>
  <body>
    <h1>Lab 7</h1>
    <!-- Page published by Emacs Muse begins here -->
<h2>Task</h2>

<p class="first">Write a program that asks the user for an input filename and an output
filename. Your program will open the input file and read values
(doubles) from the file. At the top of the file will be an integer
representing how many doubles are in the file. The doubles in the
input file will be scattered, with weird spacing and such (see example
below). Your program will read these values and save them into the
output file with one value per line (with precision 3). Thus, your
program will bascially &quot;clean up&quot; the input file.</p>

<p>Example input file:</p>

<pre class="example">
    13   3.4087     68.472
382.674 69.3 16.435000   04.4682 283.57372
  23.54 734 2    3     45 3.00
</pre>

<p>Output file (which your program creates):</p>

<pre class="example">
3.409
68.472
382.674
69.300
16.435
4.468
283.574
23.540
734.000
2.000
3.000
45.000
3.000
</pre>

<p>Your program should check if the input file can be opened. If it
cannot, it should give an error:</p>

<pre class="example">
Enter input filename: oogabooga.txt
Enter output filename: results.txt
Error opening input file.
</pre>

<p>Same with the output file; if the output file cannot be opened, there
should be an error:</p>

<pre class="example">
Enter input filename: input.txt
Enter output filename: not-a-real-directory/blah.txt
Error opening output file.
</pre>

<p>To test your program, copy the input file shown above and paste it in
a new file (or just make your own; remember the first number in the
file is an integer representing how many numbers follow). Then run
your program and specify that file when your program asks for the
input filename. When the program is done, open the output file to see
if you have the right results. Try modifying the input file for
different tests (e.g. add more spaces, change some numbers).</p>


<h2>My solution</h2>

<pre class="src">
<span style="color: #da70d6;">#include</span> <span style="color: #bc8f8f;">&lt;iostream&gt;</span>
<span style="color: #da70d6;">#include</span> <span style="color: #bc8f8f;">&lt;string&gt;</span>
<span style="color: #da70d6;">#include</span> <span style="color: #bc8f8f;">&lt;fstream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #5f9ea0;">std</span>;
<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>()
{
    <span style="color: #228b22;">string</span> <span style="color: #b8860b;">ifname</span>, <span style="color: #b8860b;">ofname</span>;
    cout &lt;&lt; <span style="color: #bc8f8f;">"Enter input filename: "</span>;
    cin &gt;&gt; ifname;

    cout &lt;&lt; <span style="color: #bc8f8f;">"Enter output filename: "</span>;
    cin &gt;&gt; ofname;

    <span style="color: #228b22;">ifstream</span> <span style="color: #b8860b;">ifs</span>;
    ifs.open(ifname.c_str());
    <span style="color: #a020f0;">if</span>(!ifs.is_open())
    {
        cout &lt;&lt; <span style="color: #bc8f8f;">"Error opening input file."</span> &lt;&lt; endl;
        <span style="color: #a020f0;">return</span> 0;
    }

    <span style="color: #228b22;">ofstream</span> <span style="color: #b8860b;">ofs</span>;
    ofs.open(ofname.c_str());
    <span style="color: #a020f0;">if</span>(!ofs.is_open())
    {
        cout &lt;&lt; <span style="color: #bc8f8f;">"Error opening output file."</span> &lt;&lt; endl;
        <span style="color: #a020f0;">return</span> 0;
    }

    ofs.precision(3);
    ofs.setf(<span style="color: #5f9ea0;">ios</span>::fixed, <span style="color: #5f9ea0;">ios</span>::floatfield);

    <span style="color: #228b22;">int</span> <span style="color: #b8860b;">n</span>;
    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">val</span>;
    ifs &gt;&gt; n;
    <span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #b8860b;">i</span> = 0; i &lt; n; i++)
    {
        ifs &gt;&gt; val;
        ofs &lt;&lt; val &lt;&lt; endl;
    }

    ifs.close();
    ofs.close();

    cout &lt;&lt; <span style="color: #bc8f8f;">"Done."</span> &lt;&lt; endl;

    <span style="color: #a020f0;">return</span> 0;
}
</pre>

<h2>Academic misconduct policy</h2>

<p class="first">All writing (prose) and coding for every one of the programming
assignments, labs, and quizzes is to be done individually. DO NOT LOOK
AT OR COPY anyone else's writing or code. DO NOT SHARE your writing or
code with anyone else. The only code you can copy is what you see in
the book and what I provide to you (in class or on this website). If
you are stuck on an assignment or lab, please visit me (or another TA)
during office hours. Suspected cases of academic misconduct will be
filed with the Committee of Academic Misconduct.</p>




<!-- Page published by Emacs Muse ends here -->
  </body>
</html>
