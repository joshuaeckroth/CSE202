<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Assignment 8</title>
    <meta name="generator" content="muse.el">
    <meta http-equiv="Content-Type"
          content="text/html; charset=iso-8859-1">
    <style type="text/css">
body {
  background: white; color: black;
  margin-left: 3%; margin-right: 7%;
  line-height: 1.5;
  font-family: Nimbus Sans L, sans;
}

p { margin-top: 1% }
p.verse { margin-left: 3% }

.example { margin-left: 3% }

li { margin: 0.5em 0; }

h2 {
  margin-top: 25px;
  margin-bottom: 0px;
}
h3 { margin-bottom: 0px; }

pre {
  border: 1px solid #ccc;
  margin: 5px;
  padding: 5px;
}

td {
  border-top: 1px solid #ccc;
  border-bottom: 1px solid #ccc;
}

code { color: #bc8f8f; font-weight: bold; }
    </style>
  </head>
  <body>
    <h1>Assignment 8</h1>
    <!-- Page published by Emacs Muse begins here -->
<h2>Task</h2>

<p class="first">Write a program that reads a list of doubles from a file and computes
the smoothed values as well as the smoothed first and second
derivatives.</p>

<p>These are the functions you must make:</p>

<ul>
<li>A function named <code>smooth()</code>, that is provided two &quot;double&quot; arrays
and a integer size <code>n</code>. The first array, <code>A</code>, is the array with the
data; the second array, <code>B</code>, is &quot;blank&quot; (but the same size as the
first). The second array is filled with values from the first,
following this formula, for <code>i</code> between <code>2</code> and <code>n-3</code> (inclusive):
<code>B[i] = (A[i-2] + 2*A[i-1] + 4*A[i] + 2*A[i+1] +
A[i+2])/10.0</code>

<p>The formula should not be used when <code>i</code> equals <code>0</code>, <code>1</code>, <code>n-2</code>, or
<code>n-1</code>. For those values of <code>i</code>, <code>B[i]=A[i]</code>.</p>

<p>In this <code>smooth()</code> function, array <code>A</code> should not be modified.</p></li>

<li>A function named <code>firstD()</code> (approximate first derivative), that has
the same kind of parameters as <code>smooth()</code> (with the same names in
this description), and fills array <code>B</code> with values according to this
formula: <code>B[i] = (A[i+1] - A[i-1])/0.2</code> for values of
<code>i</code> from <code>1</code> to <code>n-2</code> (inclusive). When <code>i=0</code> or
<code>i=n-1</code>, <code>B[0]=B[1]</code> and
<code>B[n-1]=B[n-2]</code> (these last two values must be computed
after you have computed all the others).</li>
</ul>

<p>Your program should follow these steps:</p>

<ol>
<li>Ask the user for an input filename.</li>

<li>Open the input file and read the number at the top of the file
(an integer representing how many values are in the file); call
this number <code>n</code>. Create a &quot;double&quot; array of that size called <code>vals</code>
and save all the following values in into the array.</li>

<li>Create an array of the same size called <code>smoothed</code> and call the
function <code>smooth()</code> with <code>vals</code> and <code>smoothed</code> and <code>n</code> so that the array
<code>smoothed</code> will have the &quot;smoothed&quot; version of the numbers in <code>vals</code>.</li>

<li>Create an array of the same size called <code>vals1D</code> and call the
function <code>firstD()</code> with <code>smoothed</code> and <code>vals1D</code> and <code>n</code> so that the
array <code>vals1D</code> will have the &quot;first derivative&quot; of the smoothed
values.</li>

<li>Create an array of the same size called <code>smoothed1D</code> and call the
function <code>smooth()</code> with <code>vals1D</code> and <code>smoothed1D</code> and <code>n</code> so that the
array <code>smoothed1D</code> will have the &quot;smoothed first derivative&quot; of the
smoothed values.</li>

<li>Create an array of the same size called <code>vals2D</code> and call the
function <code>firstD()</code> with <code>smoothed1D</code> and <code>vals2D</code> and <code>n</code> so that
the array <code>vals2D</code> will have the &quot;first derivative of the smoothed first
derivative&quot; of the smoothed values.</li>

<li>Create an array of the same size called <code>smoothed2D</code> and call the
function <code>smooth()</code> with <code>vals2D</code> and <code>smoothed2D</code> and <code>n</code> so that the
array <code>smoothed2D</code> will have the &quot;smoothed first derivative of the
smoothed first derivative&quot; of the smoothed values.</li>

<li>Open an output file &quot;outdata.txt&quot; that prints four columns of
numbers: the first column is the array <code>vals</code>, the second column is
the array <code>smoothed</code>, the third column is the array <code>smoothed1D</code>, and
the fourth column is the array <code>smoothed2D</code>. Separate the columns
with a tab, and print the numbers with precision ten.</li>

<li>Close the file &quot;outdata.txt&quot;.</li>

<li>On Linux in the lab, visualize the data using Matlab. Type
<code>matlab &amp;</code> to start Matlab. Within Matlab, type <code>load outdata.txt</code>
and then type <code>plot(outdata)</code> . You will need to do this step to
verify your results.</li>
</ol>


<h2>Examples</h2>

<h3>Example 1</h3>

<p class="first">Input file: <a href="a-8-input1.txt">a-8-input1.txt</a>, output: <a href="a-8-outdata1.txt">a-8-outdata1.txt</a></p>

<p>Graph of input (note: to graph the input file, delete the first line
in the file since that line is an integer indicating how many values
are in the file; Matlab does not need that).</p>

<p class="image"><img src="a-8-input1.png" alt=""></p>

<p>Graph of output:</p>

<p class="image"><img src="a-8-outdata1.png" alt=""></p>



<h3>Example 2</h3>

<p class="first">Input file: <a href="a-8-input2.txt">a-8-input2.txt</a>, output: <a href="a-8-outdata2.txt">a-8-outdata2.txt</a></p>

<p>Graph of input:</p>

<p class="image"><img src="a-8-input2.png" alt=""></p>

<p>Graph of output:</p>

<p class="image"><img src="a-8-outdata2.png" alt=""></p>


<h3>Example 3</h3>

<p class="first">Input file: <a href="a-8-input3.txt">a-8-input3.txt</a>, output: <a href="a-8-outdata3.txt">a-8-outdata3.txt</a></p>

<p>Graph of input:</p>

<p class="image"><img src="a-8-input3.png" alt=""></p>

<p>Graph of output:</p>

<p class="image"><img src="a-8-outdata3.png" alt=""></p>


<h3>Example 4</h3>

<p class="first">Input file: <a href="a-8-input4.txt">a-8-input4.txt</a>, output: <a href="a-8-outdata4.txt">a-8-outdata4.txt</a></p>

<p>Graph of input:</p>

<p class="image"><img src="a-8-input4.png" alt=""></p>

<p>Graph of output:</p>

<p class="image"><img src="a-8-outdata4.png" alt=""></p>


<h3>Example 5</h3>

<p class="first">Input file: <a href="a-8-input5.txt">a-8-input5.txt</a>, output: <a href="a-8-outdata5.txt">a-8-outdata5.txt</a></p>

<p>Graph of input:</p>

<p class="image"><img src="a-8-input5.png" alt=""></p>

<p>Graph of output:</p>

<p class="image"><img src="a-8-outdata5.png" alt=""></p>



<h2>My solution</h2>

<pre class="src">
<span style="color: #da70d6;">#include</span> <span style="color: #bc8f8f;">&lt;iostream&gt;</span>
<span style="color: #da70d6;">#include</span> <span style="color: #bc8f8f;">&lt;fstream&gt;</span>
<span style="color: #a020f0;">using</span> <span style="color: #a020f0;">namespace</span> <span style="color: #5f9ea0;">std</span>;

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">smooth</span>(<span style="color: #228b22;">double</span> <span style="color: #b8860b;">A</span>[], <span style="color: #228b22;">double</span> <span style="color: #b8860b;">B</span>[], <span style="color: #228b22;">int</span> <span style="color: #b8860b;">n</span>)
{
    <span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #b8860b;">i</span> = 2; i &lt;= (n-3); i++)
    {
        B[i] = (A[i-2] + 2*A[i-1] + 4*A[i] + 2*A[i+1] + A[i+2])/10.0;
    }
    B[0] = A[0];
    B[1] = A[1];
    B[n-2] = A[n-2];
    B[n-1] = A[n-1];
}

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">firstD</span>(<span style="color: #228b22;">double</span> <span style="color: #b8860b;">A</span>[], <span style="color: #228b22;">double</span> <span style="color: #b8860b;">B</span>[], <span style="color: #228b22;">int</span> <span style="color: #b8860b;">n</span>)
{
    <span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #b8860b;">i</span> = 1; i &lt;= (n-2); i++)
    {
        B[i] = (A[i+1] - A[i-1])/0.2;
    }
    B[0] = B[1];
    B[n-1] = B[n-2];
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>()
{
    <span style="color: #228b22;">string</span> <span style="color: #b8860b;">filename</span>;
    cout &lt;&lt; <span style="color: #bc8f8f;">"Enter filename: "</span>;
    cin &gt;&gt; filename;

    <span style="color: #228b22;">ifstream</span> <span style="color: #b8860b;">input</span>;
    input.open(filename.c_str());
    <span style="color: #a020f0;">if</span>(!input.is_open())
    {
        cout &lt;&lt; <span style="color: #bc8f8f;">"Error opening input file."</span> &lt;&lt; endl;
        <span style="color: #a020f0;">return</span> -1;
    }

    <span style="color: #228b22;">ofstream</span> <span style="color: #b8860b;">output</span>;
    output.open(<span style="color: #bc8f8f;">"outdata.txt"</span>);
    <span style="color: #a020f0;">if</span>(!output.is_open())
    {
        cout &lt;&lt; <span style="color: #bc8f8f;">"Error opening output file."</span> &lt;&lt; endl;
        <span style="color: #a020f0;">return</span> -1;
    }

    <span style="color: #228b22;">int</span> <span style="color: #b8860b;">n</span>;
    input &gt;&gt; n;

    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">vals</span>[n];
    <span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #b8860b;">i</span> = 0; i &lt; n; i++)
    {
        input &gt;&gt; vals[i];
    }

    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">smoothed</span>[n];
    smooth(vals, smoothed, n);

    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">vals1D</span>[n];
    firstD(smoothed, vals1D, n);

    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">smoothed1D</span>[n];
    smooth(vals1D, smoothed1D, n);

    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">vals2D</span>[n];
    firstD(smoothed1D, vals2D, n);

    <span style="color: #228b22;">double</span> <span style="color: #b8860b;">smoothed2D</span>[n];
    smooth(vals2D, smoothed2D, n);

    output.precision(10);
    output.setf(<span style="color: #5f9ea0;">ios</span>::fixed, <span style="color: #5f9ea0;">ios</span>::floatfield);
    <span style="color: #a020f0;">for</span>(<span style="color: #228b22;">int</span> <span style="color: #b8860b;">i</span> = 0; i &lt; n; i++)
    {
        output &lt;&lt; vals[i] &lt;&lt; <span style="color: #bc8f8f;">"\t"</span>
               &lt;&lt; smoothed[i] &lt;&lt; <span style="color: #bc8f8f;">"\t"</span>
               &lt;&lt; smoothed1D[i] &lt;&lt; <span style="color: #bc8f8f;">"\t"</span>
               &lt;&lt; smoothed2D[i] &lt;&lt; endl;
    }

    input.close();
    output.close();

    <span style="color: #a020f0;">return</span> 0;
}
</pre>

<h2>Academic misconduct policy</h2>

<p class="first">All writing (prose) and coding for every one of the programming
assignments, labs, and quizzes is to be done individually. DO NOT LOOK
AT OR COPY anyone else's writing or code. DO NOT SHARE your writing or
code with anyone else. The only code you can copy is what you see in
the book and what I provide to you (in class or on this website). If
you are stuck on an assignment or lab, please visit me (or another TA)
during office hours. Suspected cases of academic misconduct will be
filed with the Committee of Academic Misconduct.</p>




<!-- Page published by Emacs Muse ends here -->
  </body>
</html>
